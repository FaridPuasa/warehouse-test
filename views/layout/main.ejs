<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="canonical" href="https://getbootstrap.com/docs/5.2/examples/sidebars/">
    <!-- Bootstrap 5.2.0 CSS Framework -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <!-- font awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="extensions/sticky-header/bootstrap-table-sticky-header.css">
    <link rel="stylesheet" href="extensions/fixed-columns/bootstrap-table-fixed-columns.css">
    <link rel="stylesheet" href="extensions/filter-control/bootstrap-table-filter-control.css">
    <script src="extensions/sticky-header/bootstrap-table-sticky-header.js"></script>
    <script src="extensions/fixed-columns/bootstrap-table-fixed-columns.js"></script>
    <script src="extensions/filter-control/bootstrap-table-filter-control.js"></script>

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>

    <link rel="stylesheet" href="/public/style.css">
    
    <title></title>
</head>
<body>
    <div class="section wf-section">
        <div class="w-container"><a whenClicked="history.back()" href="#" class="button-8 w-button">&lt; Go Back</a>
          <h1 id="w-node-_5c40cdcd-743f-e2a9-4ca2-eec7aae7df1c-e0507387" class="heading-2">Item List</h1>
        </div>
      </div>
      <div class="wf-section">
        <div class="w-layout-grid itemlist-grid-area">
          <div id="w-node-_0d3fe4e2-7a1d-15dd-3936-9fbed11a700c-e0507387" class="w-embed">
            <div class="dropdown">
              <button class="btn btn-primary dropdown-toggle m-1" type="button" data-bs-toggle="dropdown">Area<span class="caret"></span></button>
              <ul class="dropdown-menu">
                </ul>
            </div>
          </div>
        </div>
        <div class="html-embed w-embed">
          <div id="w-node-d754e2f5-aed1-3892-5daf-5f26d402a898-e0507387" class="html-embed w-embed tableFixHead">
            <table id="myTable" class="table table-striped table-hover" data-show-export="true" data-click-to-select="true" data-toggle="table" data-toolbar="#toolbar" data-show-toggle="true" data-show-columns="true" data-search="true" data-pagination="true" data-fixed-columns="true" data-filter-control="true"  data-show-search-clear-button="true">
              <thead>
                <tr class="tableFixHead">
                  <th data-field="trackingNumber" data-sortable="true">Tracking Number</th>
                  <th data-field="parcelNumber" data-sortable="true">P/N</th>
                  <th data-field="area" data-sortable="true" data-filter-control="select">Area</th>
                  <th data-field="location" data-sortable="true" >Location</th>
                  <th data-field="name" data-sortable="true">Name</th>
                  <th data-field="contact" data-sortable="true" data-filter-control="input">Contact</th>
                  <th data-field="address" data-sortable="true">Address</th>
                  <th data-field="status" data-sortable="true">Status</th>
                  <th data-field="warehouseRemark" data-sortable="true" data-filter-control="select">Remark / GRP Charges</th>
                  <th data-field="expiryDate" data-sortable="true">Expiry Date</th>
                  <th data-field="age" data-sortable="true">Ageing</th>
                </tr>
              </thead>
  
              <!-- Limit -->
              <tbody>
                <!--Render List-->
                <%itemList.forEach((inventory,index)=> {%>
  
                <!--Modal Details Here-->
                <div class="modal fade" id="tnModal<%= index %>" tabindex="-1" role="dialog" aria-labelledby="tnModalLabel<%= index %>" aria-hidden="true">
                  <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title m-auto" id="tnModalLabel<%= index %>"><%= inventory.trackingNumber %> | <%= inventory.parcelNumber %></h5>
                        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
  
                      <div class="modal-body container col-md-12">
                        <div class="row">
                          <div class="col-md-4 mx-auto">
                            <h4>Name:</h4>
                            <p><%= inventory.name %></p>
                            <h4>Contact:</h4>
                            <p><%= inventory.contact %></p>
                            <h4>Address:</h4>
                            <p><%= inventory.address %></p>
                            <h4>Product:</h4>
                            <p><%= inventory.product %></p>
                            <h4>Expiry Date:</h4>
                            <p class="expire"><span><%= moment(inventory.expireDate).format("DD/MM/YYYY, h:mm:ss a") %></span></p>
                          </div>
  
                          <div class="col-md-6 mx-auto">
                            <h4>Parcel History:</h4>
                            <% for(var i = 0 ; i < inventory.history.length; i++) {%>
                            <ul>
                              <li><%= inventory.history[i].statusDetail %></li>
                              <ul>
                                <li><b>Updated on:</b> &nbsp;<%= inventory.history[i].dateUpdated %></li>
                              </ul>
                            </ul>
                            <% } %>
                          </div>
  
                          <div class="col-md-2 mx-auto">
                            <h3 class="my-auto">Value: $<%= inventory.value %></h3>
                            <h3>Area: </h3>
                            <h3><%= inventory.area %></h3>
                            <h3>Location: </h3>
                            <h3><%= inventory.areaIndicator %></h3>
                          </div>
                        </div>
                      </div>
  
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                      </div>
  
                    </div>
                  </div>
                </div>
  
                <!-- Modal Edit Details -->
                <div class="modal fade" id="editModal<%= index %>" tabindex="-1" role="dialog" aria-labelledby="editModalLabel<%= index %>" aria-hidden="true">
                  <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title m-auto" id="editModalLabel<%= index %>"><%= inventory.trackingNumber %> | <%= inventory.parcelNumber %></h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
  
                        </button>
                      </div>
                      <div class="modal-body container col-md-12">
                        <form class="form" action="/editTc" method="post">
  
                          <div class="form-group mx-sm-3 mb-2">
                            <h4>Name:</h4>
                            <p><%= inventory.name %></p>
                          </div>
  
                          <div class="form-group mx-sm-3 mb-2">
                            <label for="editContact">Contact</label>
                            <input type="text" class="form-control" id="editContact<%= index %>" name="address" value="<%= inventory.contact %>">
                          </div>
  
                          <div class="form-group mx-sm-3 mb-2">
                            <label for="editAddress">Address</label>
                            <input type="text" class="form-control" id="editAddress<%= index %>" name="contact" value="<%= inventory.address %>">
                          </div>
  
                          <div class="form-group mx-sm-3 mb-2">
                            <label for="editArea">Area</label>
                            <input type="text" class="form-control" id="editArea<%= index %>" name="area" value="<%= inventory.area %>">
                          </div>
  
                          <div class="form-group mx-sm-3 mb-2">
                            <label for="editLocation">Location</label>
                            <input type="text" class="form-control" id="editLocation<%= index %>" name="areaIndicator" value="<%= inventory.areaIndicator %>">
                          </div>
                      </div>
  
                      <input type="text" name="username" value="<%= name %>" hidden>
                      <input type="text" name="userID" value="<%= icNumber %>" hidden>
                      <input type="text" name="userPos" value="<%= position %>" hidden>
                      <input type="text" name="formMETHOD" value="editTC" hidden>
  
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary"><i class="far fa-save"></i></button>
                      </div>
  
                      </form>
  
                    </div>
                  </div>
                </div>
  
                <!--Render List-->
                <tr class="content">
                  <td scope="row" class="trackingNum"><button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#tnModal<%= index %>">
                      <%= inventory.trackingNumber %>
                    </button></td>
                  <td><span><%= inventory.parcelNumber %></span></td>
                  <td><span><%= inventory.area %></span></td>
                  <td><span><%= inventory.areaIndicator %></span></td>
                  <td><span><%= inventory.name %></span></td>
                  <td><span><%= inventory.contact %></span></td>
                  <td><span><%= inventory.address %></span></td>
                  <td class="itemStatus"><span><%= inventory.status %></span></td>
                  <td><span><%= inventory.note %></span></td>
                  <td class="expire"><span><%= moment(inventory.expireDate).format("DD/MM/YYYY, h:mm:ss a") %></span></td>
                  <td><span id="days<%=index%>">
                      <% function dateDiff() { 
                        let todate = Date.parse(moment().format())
                        let expire = Date.parse(inventory.expireDate)
                        let days = Math.round((expire - todate) / (60 * 60 * 24 * 1000))
                        if (days <= 0){
                          days = "Expired Task"
                        }
                        else{
                          days = days + " Days"
                        }
                        return days
                      }
                    %>
                      <%= dateDiff() %></span></td>
                  <!--<td>
                    <button type="button" class="btn btn-info p-1" data-toggle="modal" data-target="#editModal<%= index %>">
                      <i class="far fa-edit"></i>
                    </button>
                  </td> -->
                </tr>
                <%})%>
  
              </tbody>
  
            </table>
          </div>
        </div>
      </div>


    
   
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
    <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=61fb4a164eca130338cafeaa" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://uploads-ssl.webflow.com/61fb4a164eca130338cafeaa/js/webflow.3866d810a.js" type="text/javascript"></script>
    <!--[if lte IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif]-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.20.1/dist/bootstrap-table.min.css">
    <script src="https://cdn.jsdelivr.net/npm/tableexport.jquery.plugin@1.10.21/tableExport.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tableexport.jquery.plugin@1.10.21/libs/jsPDF/jspdf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tableexport.jquery.plugin@1.10.21/libs/jsPDF-AutoTable/jspdf.plugin.autotable.js"></script>
    <script src="https://unpkg.com/bootstrap-table@1.20.1/dist/bootstrap-table.min.js"></script>
    <script src="https://unpkg.com/bootstrap-table@1.20.1/dist/extensions/print/bootstrap-table-print.min.js"></script>
    <script src="https://unpkg.com/bootstrap-table@1.20.1/dist/extensions/export/bootstrap-table-export.min.js"></script>
    <script src="https://unpkg.com/bootstrap-table@1.20.1/dist/extensions/sticky-header/bootstrap-table-sticky-header.min.js"></script>
    <script src="https://unpkg.com/bootstrap-table@1.20.2/dist/extensions/filter-control/bootstrap-table-filter-control.min.js"></script>

    <script src="/js/sidebars.js"></script>
    <script src="/js/tables.js"></script>
</body>
</html>

